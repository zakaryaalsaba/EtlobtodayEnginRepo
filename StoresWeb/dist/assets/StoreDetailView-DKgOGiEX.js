import{u as P,i as N,j,r as B,o,b as a,k as D,w as I,a as e,t as n,l as U,e as k,f as L,F as x,g as C,d as S,m as T,h,c as V}from"./index-ChIn5XDW.js";import{f as W}from"./currency-jolHBzHh.js";import{a as R}from"./stores-CPvMirkz.js";import{f as F}from"./products-B9pNirOm.js";const M={class:"card overflow-hidden group"},q={class:"aspect-[4/3] bg-gray-200 overflow-hidden"},E=["src","alt"],O={key:1,class:"w-full h-full flex items-center justify-center text-5xl text-gray-400"},z={class:"p-4"},A={class:"font-semibold text-gray-900"},G={class:"mt-1 text-indigo-600 font-bold"},H={class:"px-4 pb-4"},J={__name:"ProductCard",props:{product:{type:Object,required:!0},storeId:{type:[Number,String],default:null},currencyCode:{type:String,default:"USD"},symbolPosition:{type:String,default:"before"}},setup(l){const c=l,{t:d,locale:m}=P(),f=N(),s=j(),_="http://localhost:3000";function y(r){return r?r.startsWith("http")?r:`${_}${r.startsWith("/")?"":"/"}${r}`:""}function i(r){return m.value==="ar"&&r.name_ar?r.name_ar:r.name||"Product"}function p(r,g=c.currencyCode,t=c.symbolPosition){return W(r,g,t)}function b(){f.addItem(c.product,1,c.storeId?Number(c.storeId):null),s.show(d("cart.addedToCart"),{duration:3500,cartLink:!0})}return(r,g)=>{const t=B("router-link");return o(),a("div",M,[D(t,{to:{name:"ProductDetail",params:{id:l.product.id}},class:"block"},{default:I(()=>[e("div",q,[l.product.image_url?(o(),a("img",{key:0,src:y(l.product.image_url),alt:i(l.product),class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,E)):(o(),a("div",O,"ðŸ“¦"))]),e("div",z,[e("h3",A,n(i(l.product)),1),e("p",G,n(p(l.product.price,l.currencyCode,l.symbolPosition)),1)])]),_:1},8,["to"]),e("div",H,[e("button",{type:"button",class:"w-full btn-primary py-2.5 text-sm",onClick:U(b,["prevent"])},n(k(d)("product.addToCart")),1)])])}}},K={class:"animate-fade-in"},Q={key:0,class:"space-y-6"},X={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},Y={key:1,class:"rounded-2xl bg-red-50 border border-red-200 p-6 text-red-700"},Z={class:"flex flex-col sm:flex-row gap-4 mb-8"},tt={class:"w-full sm:w-64 h-48 sm:h-40 rounded-2xl overflow-hidden bg-gray-200 shrink-0"},et=["src","alt"],rt={key:1,class:"w-full h-full flex items-center justify-center text-6xl text-gray-400"},st={class:"flex-1"},ot={class:"text-2xl sm:text-3xl font-bold text-gray-900"},at={key:0,class:"mt-2 text-gray-600"},lt={class:"text-xl font-semibold text-gray-900 mb-4"},nt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},mt={__name:"StoreDetailView",setup(l){const c=T(),d=N(),{t:m,locale:f}=P(),s=h(null),_=h([]),y=h(!0),i=h(null),p="http://localhost:3000";function b(t){return t?t.startsWith("http")?t:`${p}${t.startsWith("/")?"":"/"}${t}`:""}function r(t){return f.value==="ar"&&t.restaurant_name_ar?t.restaurant_name_ar:t.restaurant_name||"Store"}function g(t){return f.value==="ar"&&t.description_ar?t.description_ar:t.description||""}return L(async()=>{const t=c.params.id;try{s.value=await R(t),_.value=await F(t),d.setStoreCurrency(s.value)}catch(u){i.value=u.message}finally{y.value=!1}}),(t,u)=>(o(),a("div",K,[y.value?(o(),a("div",Q,[u[0]||(u[0]=e("div",{class:"h-48 bg-gray-200 rounded-2xl animate-pulse"},null,-1)),u[1]||(u[1]=e("div",{class:"h-8 w-2/3 bg-gray-200 rounded animate-pulse"},null,-1)),e("div",X,[(o(),a(x,null,C(6,v=>e("div",{key:v,class:"h-56 bg-gray-200 rounded-2xl animate-pulse"})),64))])])):i.value?(o(),a("div",Y,n(k(m)("common.error"))+": "+n(i.value),1)):s.value?(o(),a(x,{key:2},[e("div",Z,[e("div",tt,[s.value.logo_url?(o(),a("img",{key:0,src:b(s.value.logo_url),alt:r(s.value),class:"w-full h-full object-cover"},null,8,et)):(o(),a("div",rt,"ðŸª"))]),e("div",st,[e("h1",ot,n(r(s.value)),1),s.value.description?(o(),a("p",at,n(g(s.value)),1)):S("",!0)])]),e("h2",lt,n(k(m)("store.products")),1),e("div",nt,[(o(!0),a(x,null,C(_.value,v=>{var w,$;return o(),V(J,{key:v.id,product:v,"store-id":s.value.id,"currency-code":(w=s.value)==null?void 0:w.currency_code,"symbol-position":($=s.value)==null?void 0:$.currency_symbol_position},null,8,["product","store-id","currency-code","symbol-position"])}),128))])],64)):S("",!0)]))}};export{mt as default};
